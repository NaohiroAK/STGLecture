## 12. ゲームオーバー画面を実装してみよう

### 概要

前回までの内容で、ゲームのタイトル画面が実装できました。
見た目が一気にゲームらしくなって来たところで、今回は同様の考え方を使って「ゲームオーバー画面」を実装してみましょう。

### 下準備

さて、前回作ったタイトル画面と同じように、ゲームオーバー画面を実装してみます。
ゲームオーバー画面では「スコアを表示する」「ランキングを表示する」など様々な仕様が考えられますが、取り敢えずこの時点では「Zキーを押したらタイトル画面に移動する」ような処理を書いてみることにしましょう。基本的にタイトル画面と同じ実装になります。

新規にGameOverScene.csを作成し、以下のように記述してください。

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace STG
{
	// ゲームオーバー画面を表すシーン
	class GameOverScene : asd.Scene
	{
		protected override void OnStart()
		{
			// 2Dを表示するレイヤーのインスタンスを生成する。
			asd.Layer2D layer = new asd.Layer2D();

			// シーンにレイヤーのインスタンスを追加する。
			AddLayer(layer);

			// 背景画像を表示するオブジェクトのインスタンスを生成する。
			asd.TextureObject2D background = new asd.TextureObject2D();
			background.Texture = asd.Engine.Graphics.CreateTexture2D("Resources/Over.png");

			// レイヤーにオブジェクトのインスタンスを追加する。
			layer.AddObject(background);
		}

		protected override void OnUpdated()
		{
			// もし、Zキーを押したら{}内の処理を行う。
			if (asd.Engine.Keyboard.GetKeyState(asd.Keys.Z) == asd.KeyState.Push)
			{
				asd.Engine.ChangeSceneWithTransition(new TitleScene(), new asd.TransitionFade(1.0f, 1.0f));
			}
		}
	}
}
```

基本的な実装についてはタイトル画面と全く同じなので、詳細の解説は省略します。

### 自機の死亡処理

ゲームオーバーの条件を「自機が敵弾に当たること」とするわけですから、「自機が敵弾に当たったら画面遷移をする」ようなコードを書いてみましょう。

### ゲームオーバー時に必要な処理

さてゲームオーバー時には、「ゲームオーバー画面を出すこと」に加えていくつかの処理を行わなければなりません。
例えば自機や敵機のデータがそのまま残っていると、タイトル画面から再度ゲームを始めたときに「さっきまでいた」敵機が残っていることがありますし、或いは現在のスコアをゼロに戻していないと「ゲームを繰り返すごとにスコアがたまっていく」というおかしな仕様になってしまうこともあります。
そこで、下記のように処理を書き加えることで、これらのバグが発生しないようにしてみましょう。

