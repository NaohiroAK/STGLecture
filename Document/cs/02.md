## 02. キャラクターを描画してみよう

### 概要

前章ではウインドウを表示してみました。しかし、画面は真っ黒のままで寂しいです。そこで本章では画面にキャラクターを表示してみます。


### 事前準備

今回も、プロジェクトの設定は自分で変更せずに、設定済みのプロジェクトをダウンロードして、それを使用します。

ただし、注意点があります。本章からは一部のファイルがプロジェクトに含まれておらず、自分で配置する必要があります。
具体的には```ace_cs.dll```、```ace_core.dll```、```ace_cs.xml```と画像等のファイルが含まれていません。

ace～のファイルは以下のリンクからダウンロードします。

[DLL](Common/dll.zip)

画像等のファイルは以下のリンクからダウンロードします。

[リソース](Common/Resources.zip)

それらのファイルをダウンロードしたら、解凍してプロジェクトに配置します。

[プロジェクト](Projects/STG02.zip)

```dll.zip``` の中身は、```STG02/STG02/``` に配置します。

![DLL](img/02_dll.png)

```Resources.zip```の中身は、```STG02/bin/``` に配置します。この時、``` /bin/Resources/画像等``` と配置されるようにします。
Windowsの標準機能で解凍した場合、Resourcesのフォルダが2重にできてしまうので注意しましょう。

![DLL](img/02_resources.png)

全てのファイルを配置し終わったら、STG02.slnを開きます。```Program.cs```には前章で記述したソースコードが書いてあります。今回はこれに画像の表示する機能を追加していきます。


### キャラクターの表示

それでは、キャラクターを表示するためにMainメソッドを以下のように書き換えます。


```

// aceを初期化する。
ace.Engine.Initialize("STG02", 640, 480, new ace.EngineOption());

//========================================================================================================//

// オブジェクトを生成する。
ace.TextureObject2D obj = new ace.TextureObject2D();

// 画像を読み込み、オブジェクトに設定する。
obj.Texture = ace.Engine.Graphics.CreateTexture2D("Resource/Player.png");

// レイヤーを生成する。
ace.Layer2D layer = new ace.Layer2D();

// レイヤーにオブジェクトを追加する。
layer.AddObject(obj);

// シーンを生成する。
ace.Scene scene = new ace.Scene();

// シーンにレイヤーを追加する。
scene.AddLayer(layer);

// シーンを切り替える。
ace.Engine.ChangeScene(scene);

//========================================================================================================//

// aceが進行可能かチェックする。
while (ace.Engine.DoEvents() && ace.Engine.Keyboard.GetKeyState(ace.Keys.Escape) != ace.KeyState.Push)
{
	// aceを更新する。
	ace.Engine.Update();
}

// aceを終了する。
ace.Engine.Terminate();


```

いきなり、オブジェクト、レイヤー、シーンといった初めて聞く単語がでてきました。
これらはACE特有の機能であり画像1枚描画する分には冗長な機能ですが、ある程度ゲームの規模が大きくなると非常に役に立ちます。

大まかに説明すると、

*シーン　　　　タイトル画面、ゲーム画面といった大きな場面
*レイヤー　　　前景、背景といった大きな場面内でも前後で分離できる部分
*オブジェクト　キャラクターや敵といったゲーム中を動き回るオブジェクト

になっています。今回の場合、タイトル画面やゲーム画面という区別もなく、背景も表示していないのでシーンもレイヤーも殆ど意味をなしていません。
ただ、オブジェクトを描画するためにはシーンとレイヤーが必要なので存在しています。

![デザイン](img/02_design.png)


### まとめ

本章では、画像の表示方法を学びキャラクターを表示しました。次はこのキャラクターを動かしていきます。

